<div>
    <div class="min-h-screen flex flex-col relative px-6 py-6">
        <header class="flex items-center justify-between mb-8 z-10">
            <div class="flex items-center space-x-4">
                <div class="w-8 h-8 flex items-center justify-center christmas-tree">
                <i class="ri-pine-tree-fill ri-2x"></i>
                </div>
                <h1 class="font-['Pacifico'] text-3xl text-white glow-text">
                Gestione Liste
                </h1>
                <div class="w-8 h-8 flex items-center justify-center star floating">
                <i class="ri-star-fill ri-2x"></i>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                {% comment %} <button
                class="christmas-button rounded px-4 py-2 text-white font-medium whitespace-nowrap flex items-center space-x-2">
                <div class="w-5 h-5 flex items-center justify-center">
                    <i class="ri-user-line"></i>
                </div>
                <span>Profilo</span>
                </button> {% endcomment %}
                {% comment %} <button
                class="bg-white/20 hover:bg-white/30 rounded px-4 py-2 text-white font-medium whitespace-nowrap flex items-center space-x-2 transition-colors">
                <div class="w-5 h-5 flex items-center justify-center">
                    <i class="ri-logout-circle-line"></i>
                </div>
                <span>Esci</span>
                </button> {% endcomment %}
            </div>
        </header>
        <div class="flex-1 h-full flex gap-6 z-10">
            <div class="w-1/3 h-full">
                <div class="login-card rounded-2xl h-full">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="font-['Merriweather'] text-xl font-bold text-gray-800">
                                Le Mie Liste
                            </h2>
                            <details class="inline-block relative  group">
                                <summary class="list-none inline-flex items-center gap-2 px-3 py-3 bg-red-600 text-white text-sm font-medium rounded-md cursor-pointer hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 [&::-webkit-details-marker]:hidden">
                                    <i class="ri-add-line ri-lg"></i>
                                </summary>
                                <div class="mt-2 w-64 absolute right-0 bg-white border border-gray-200 rounded-lg shadow-lg p-4 group-open:block hidden">
                                    {% comment %} <label for="" class="block text-sm font-medium text-gray-700 mb-1">
                                        Inserisci qualcosa
                                    </label> {% endcomment %}
                                    <input u:model.defer="new_list_name" type="text" name="" id="" placeholder="Nome Lista"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
                                    >
                                    <input u:model.defer="budget" type="text" name="" id="" placeholder="Budget"
                                        class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
                                    >
                                    <div class="mt-3 flex justify-end gap-2">
                                        {% comment %} <button
                                            u:click="annulla"
                                            type="button"
                                            class="px-3 py-1.5 text-sm rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100"
                                        >
                                            Annulla
                                        </button> {% endcomment %}
                                        <button
                                            u:click="create_list"
                                            type="button"
                                            class="px-3 py-1.5 text-sm rounded-md bg-red-600 text-white hover:bg-red-700"
                                        >
                                            Crea
                                        </button>
                                    </div>
                                </div>
                            </details>
                            {% comment %} <button id="add-list-btn"
                                u:click="new_list"
                                class="{% if add_list %}hidden{% endif %} w-10 h-10 flex items-center justify-center christmas-button rounded text-white">
                                <i class="ri-add-line ri-lg"></i>
                            </button>
                            <div class="{% if not add_list %}hidden {% endif %}">
                                <input type="text" u:model="new_list_name" class="w-auto mr-2 pl-2 pr-6 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm transition-colors">
                                <button u:click="create_list" class="w-12 h-10 items-center christmas-button rounded text-white">Crea</button>
                                <button  u:click="annulla" class="w-16 h-10 items-center christmas-button rounded text-white">Annulla</button>
                            </div> {% endcomment %}
                            
                        </div>
                    </div>
                    <div class="p-6 max-h-[70vh] overflow-y-auto">
                        <div class="space-y-3 mb-2">
                            {% for ls in secret_lists %}
                                <div
                                class="list-item active p-4  from-red-50 to-red-100 border-2 border-red-200 rounded-xl cursor-pointer transition-all hover:shadow-md"
                                data-list="{{ls.name}}"
                                u:click="show_list_parts({{ls}})">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 flex items-center justify-center bg-red-500 rounded-full text-white">
                                            <i class="{{ls.icon}} ri-lg"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-semibold text-gray-800">{{ ls.name }}</h3>
                                            <p class="text-gray-600 text-sm">{{ ls.num_parts }}</p>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                            {% comment %} <div
                                class="list-item p-4 bg-white border-2 border-gray-200 rounded-xl cursor-pointer transition-all hover:shadow-md hover:border-primary"
                                data-list="amici">
                                <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 flex items-center justify-center bg-blue-500 rounded-full text-white">
                                    <i class="ri-group-fill ri-lg"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Lista Amici</h3>
                                    <p class="text-gray-600 text-sm">8 persone</p>
                                </div>
                                </div>
                            </div>
                            <div
                                class="list-item p-4 bg-white border-2 border-gray-200 rounded-xl cursor-pointer transition-all hover:shadow-md hover:border-primary"
                                data-list="colleghi">
                                <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 flex items-center justify-center bg-green-500 rounded-full text-white">
                                    <i class="ri-briefcase-fill ri-lg"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Lista Colleghi</h3>
                                    <p class="text-gray-600 text-sm">3 persone</p>
                                </div>
                                </div>
                            </div> {% endcomment %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex-1">
                <div class="login-card rounded-2xl h-full">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 id="current-list-title" class="font-['Merriweather'] text-xl font-bold text-gray-800">
                                {{ list_data.list_name }}
                            </h2>
                            {% if list_data.list_budget %}
                                <h3 class="font-['Merriweather'] text-xl font-bold text-gray-800">
                                    {{ list_data.code }}
                                </h3>
                                <h3 class="font-['Merriweather'] text-xl font-bold text-gray-800">                                
                                    Budget: {{ list_data.list_budget }} â‚¬
                                </h3>
                            {% endif %}
                            <button id="create-match"
                                u:click="create_match({{list_data}})"
                                class="{% if not show_buttons %} hidden {% else %} inline-flex {% endif %} list-none items-center gap-2 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md cursor-pointer hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 [&::-webkit-details-marker]:hidden">
                                <div class="w-4 h-4 flex items-center justify-center">
                                    <i class="ri-add-line"></i>
                                </div>
                                <span>Create Match </span>
                            </button>
                            <details class="{% if not show_buttons %} hidden {% else %} inline-block {% endif %} relative  group">
                                <summary class="list-none inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md cursor-pointer hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 [&::-webkit-details-marker]:hidden">
                                    Aggiungi Persona
                                    <span class=""><i class="ri-user-add-line"></i></span>
                                </summary>
                                <div class="mt-2 w-64 absolute right-0 bg-white border border-gray-200 rounded-lg shadow-lg p-4 group-open:block hidden">
                                    {% comment %} <label for="" class="block text-sm font-medium text-gray-700 mb-1">
                                        Inserisci qualcosa
                                    </label> {% endcomment %}
                                    <input u:model.defer="new_part" type="text" name="" id="" placeholder="Nome Partecipante"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"
                                    >
                                    <div class="mt-3 flex justify-end gap-2">
                                        <button
                                            type="button"
                                            class="px-3 py-1.5 text-sm rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100"
                                        >
                                            Annulla
                                        </button>
                                        <button
                                            u:click="add_person_to_list({{list_data}})"
                                            type="button"
                                            class="px-3 py-1.5 text-sm rounded-md bg-red-600 text-white hover:bg-red-700"
                                        >
                                            Conferma
                                        </button>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>
                    <div class="p-6 max-h-[70vh] overflow-y-auto">
                        <div id="people-container" class="space-y-4 max-h-auto overflow-y-auto">
                            {% for part in list_data.parts %}
                                <div
                                    class="person-card p-5 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-4">
                                            <div
                                            class="w-14 h-14 bg-red-500 from-red-400 to-red-600 rounded-full flex items-center justify-center text-white font-bold text-lg">
                                                {{ part|first }}
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-800 text-lg">{{ part }}</h4>
                                            </div>
                                            {% if part|title == list_data.receiver|title %}
                                                <div class="w-10 h-10 flex items-center justify-center bg-red-500 rounded-full text-white">
                                                    <i class="ri-gift-fill ri-lg"></i>
                                                </div>
                                            {% endif %}
                                        </div>
                                        {% comment %} <div class="flex items-center space-x-2">
                                            <button
                                                class="w-10 h-10 flex items-center justify-center text-gray-500 hover:text-primary transition-colors rounded-lg hover:bg-gray-50">
                                                <i class="ri-edit-line ri-lg"></i>
                                            </button>
                                            <button
                                                u:click="delete_name_from_list({{part}}, {{list_data.code}})"
                                                class="w-10 h-10 flex items-center justify-center text-gray-500 hover:text-red-500 transition-colors rounded-lg hover:bg-gray-50">
                                                <i class="ri-delete-bin-line ri-lg"></i>
                                            </button>
                                        </div> {% endcomment %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 